{% extends "base.html" %}
{% block content %}
<h1>Analytics</h1>

<div class="grid-cards">

  <div class="card">
    <h2>Reservations by Restaurant</h2>
    <div class="helper">Summary of reservations grouped by restaurant.</div>
    <div class="table-wrap">
      <table>
        <thead>
          <tr>
            <th>Restaurant</th>
            <th>Total Reservations</th>
            <th>Avg Party Size</th>
          </tr>
        </thead>
        <tbody>
          {% for r in reservations_by_restaurant %}
          <tr>
            <td>{{ r.restaurant_name or r.restaurant_id }}</td>
            <td>{{ r.total_reservations }}</td>
            <td>{{ "%.1f"|format(r.avg_party_size) }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

  <div class="card">
    <h2>Waitlist by Restaurant</h2>
    <div class="helper">Summary of waitlist entries grouped by restaurant.</div>
    <div class="table-wrap">
      <table>
        <thead>
          <tr>
            <th>Restaurant</th>
            <th>Total Waitlisted</th>
          </tr>
        </thead>
        <tbody>
          {% for r in waitlist_by_restaurant %}
          <tr>
            <td>{{ r.restaurant_name or r.restaurant_id }}</td>
            <td>{{ r.total_waitlisted }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
  


</div>

<div class="grid-cards" style="margin-top: 1rem;">
  <button id="report" class="btn" type="button" onclick="makeReport()">
    Download Report
  </button>
</div>

<script>
  function makeReport() {
    window.print();
  }
</script>

{% endblock %}

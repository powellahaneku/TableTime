{% extends "base.html" %}
{% block content %}
<h1>Analytics</h1>
<div class="grid-cards">
  <div class="card">
    <h2>Events by Type</h2>
    <div class="helper">Summary of analytics_log grouped by event type.</div>
    <div class="table-wrap">
      <table>
        <tr><th>Event Type</th><th>Count</th><th>Sum</th></tr>
        {% for r in by_type %}
          <tr><td>{{ r.event_type }}</td><td>{{ r.count }}</td><td>{{ "%.2f"|format(r.sum) }}</td></tr>
        {% endfor %}
      </table>
    </div>
  </div>
  <div class="card">
    <h2>Events by Restaurant</h2>
    <div class="table-wrap">
      <table>
        <tr><th>Restaurant</th><th>Count</th></tr>
        {% for r in by_rest %}
          <tr><td>{{ r.restaurant_id }}</td><td>{{ r.count }}</td></tr>
        {% endfor %}
      </table>
    </div> 

</div>
  </div>
  <div class = "grid-cards">
       <button id="report" onClick="makeReport()">
        Download Report
        <script>
          function makeReport() {
            print()
          }
        </script>
     </button>
  </div>
  
  {% endblock %}

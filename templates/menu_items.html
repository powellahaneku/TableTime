{% extends "base.html" %}
{% block content %}
<h1>Menu Items</h1>
<form method="POST" class="grid">
  <div>
    <label>Restaurant</label>
    <select name="restaurant_id" required>
      {% for r in restaurants or [] %}
        <option value="{{ r.restaurant_id }}">{{ r.name }}</option>
      {% endfor %}
    </select>
  </div>
  <div><label>Name</label><input name="name" placeholder="Truffle Pasta" required></div>
  <div><label>Category</label><input name="category" placeholder="Entree"></div>
  <div><label>Price</label><input name="price" type="number" step="0.01" placeholder="29.00" required></div>
  <div><label>Description</label><input name="description" placeholder="House-made pasta, black truffle"></div>
  <div>
    <label>Available</label>
    <select name="is_available"><option value="true">Yes</option><option value="false">No</option></select>
  </div>
  <div style="align-self:end"><button type="submit">Add Item</button></div>
</form>

<h2>All Items</h2>
<div class="table-wrap">
<table>
  <tr><th>Restaurant</th><th>Name</th><th>Category</th><th>Price</th><th>Available</th><th></th></tr>
  {% for m in items %}
    <tr>
      <td>{{ m.restaurant_name or m.restaurant_id }}</td>
      <td>{{ m.name }}</td>
      <td>{{ m.category }}</td>
      <td>${{ '%.2f'|format(m.price) }}</td>
      <td><span class="badge {{ 'success' if m.is_available else 'error' }}">{{ 'Yes' if m.is_available else 'No' }}</span></td>
      <td>
        <form method="POST" style="display:inline">
          <input type="hidden" name="__delete_id" value="{{ m.item_id }}">
          <button class="btn secondary">Delete</button>
        </form>
      </td>
    </tr>
  {% endfor %}
</table>
</div>
{% endblock %}
